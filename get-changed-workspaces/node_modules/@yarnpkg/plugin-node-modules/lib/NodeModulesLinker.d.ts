import { FetchResult, Installer, LocatorHash, Descriptor } from '@yarnpkg/core';
import { Linker, LinkOptions, MinimalLinkOptions } from '@yarnpkg/core';
import { Locator, Package, FinalizeInstallStatus } from '@yarnpkg/core';
import { PortablePath } from '@yarnpkg/fslib';
export declare class NodeModulesLinker implements Linker {
    supportsPackage(pkg: Package, opts: MinimalLinkOptions): boolean;
    findPackageLocation(locator: Locator, opts: LinkOptions): Promise<PortablePath>;
    findPackageLocator(location: PortablePath, opts: LinkOptions): Promise<Locator | null>;
    makeInstaller(opts: LinkOptions): NodeModulesInstaller;
}
declare class NodeModulesInstaller implements Installer {
    private opts;
    private localStore;
    constructor(opts: LinkOptions);
    getCustomDataKey(): string;
    private customData;
    attachCustomData(customData: any): void;
    installPackage(pkg: Package, fetchResult: FetchResult): Promise<{
        packageLocation: null;
        buildDirective: null;
    } | {
        packageLocation: PortablePath;
        buildDirective: null;
    }>;
    attachInternalDependencies(locator: Locator, dependencies: Array<[Descriptor, Locator]>): Promise<void>;
    attachExternalDependents(locator: Locator, dependentPaths: Array<PortablePath>): Promise<void>;
    finalizeInstall(): Promise<{
        customData: {
            store: Map<LocatorHash, {
                manifest: {
                    bin: Map<string, PortablePath>;
                    os: string[] | null;
                    cpu: string[] | null;
                    scripts: Map<string, string>;
                };
                misc: {
                    extractHint: boolean;
                    hasBindingGyp: boolean;
                };
            }>;
        };
        records: FinalizeInstallStatus[];
    } | undefined>;
}
export {};
