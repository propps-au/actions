"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const core_1 = require("@yarnpkg/core");
const fslib_1 = require("@yarnpkg/fslib");
const clipanion_1 = require("clipanion");
// eslint-disable-next-line arca/no-default-export
class EntryCommand extends clipanion_1.Command {
    constructor() {
        super(...arguments);
        this.args = [];
    }
    async execute() {
        if (this.leadingArgument.match(/[\\/]/) && !core_1.structUtils.tryParseIdent(this.leadingArgument)) {
            const newCwd = fslib_1.ppath.resolve(this.context.cwd, fslib_1.npath.toPortablePath(this.leadingArgument));
            return await this.cli.run(this.args, { cwd: newCwd });
        }
        else {
            return await this.cli.run([`run`, this.leadingArgument, ...this.args]);
        }
    }
}
tslib_1.__decorate([
    clipanion_1.Command.String()
], EntryCommand.prototype, "leadingArgument", void 0);
tslib_1.__decorate([
    clipanion_1.Command.Proxy()
], EntryCommand.prototype, "args", void 0);
exports.default = EntryCommand;
